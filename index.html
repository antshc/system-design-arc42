<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Example Software Architecture Documentation with arc42 and the C4 model</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Example Software Architecture Documentation with arc42 and the C4 model</h1>
<div class="details">
<span id="revnumber">version 8.1 EN,</span>
<span id="revdate">February 2023</span>
<br><span id="revremark">(based upon AsciiDoc version)</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#section-introduction-and-goals">1. Introduction and Goals</a>
<ul class="sectlevel2">
<li><a href="#_goals">1.1. Goals</a></li>
<li><a href="#_requirements_overview">1.2. Requirements Overview</a></li>
<li><a href="#_quality_goals">1.3. Quality Goals</a></li>
<li><a href="#_stakeholders">1.4. Stakeholders</a></li>
</ul>
</li>
<li><a href="#section-architecture-constraints">2. Architecture Constraints</a></li>
<li><a href="#section-system-scope-and-context">3. System Scope and Context</a>
<ul class="sectlevel2">
<li><a href="#_business_context">3.1. Business Context</a></li>
<li><a href="#_technical_context">3.2. Technical Context</a></li>
</ul>
</li>
<li><a href="#section-solution-strategy">4. Solution Strategy</a></li>
<li><a href="#section-building-block-view">5. Building Block View</a>
<ul class="sectlevel2">
<li><a href="#_high_level_design">5.1. High level design</a></li>
<li><a href="#_microservices">5.2. Microservices</a>
<ul class="sectlevel3">
<li><a href="#_timelines_api">5.2.1. Timelines API</a></li>
<li><a href="#_users_api">5.2.2. Users API</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#section-runtime-view">6. Runtime View</a>
<ul class="sectlevel2">
<li><a href="#_sign_in">6.1. Sign-In</a></li>
</ul>
</li>
<li><a href="#section-deployment-view">7. Deployment View</a>
<ul class="sectlevel2">
<li><a href="#_development_environment">7.1. Development environment</a>
<ul class="sectlevel3">
<li><a href="#_motivation">7.1.1. Motivation</a></li>
<li><a href="#_quality_andor_performance_features">7.1.2. Quality and/or Performance Features</a></li>
</ul>
</li>
<li><a href="#_production_environment">7.2. Production environment</a>
<ul class="sectlevel3">
<li><a href="#_motivation_2">7.2.1. Motivation</a></li>
<li><a href="#_quality_andor_performance_features_2">7.2.2. Quality and/or Performance Features</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#section-concepts">8. Cross-cutting Concepts</a>
<ul class="sectlevel2">
<li><a href="#_logging">8.1. Logging</a>
<ul class="sectlevel3">
<li><a href="#_description">8.1.1. Description</a></li>
</ul>
</li>
<li><a href="#_message_handling_with_masstransit_and_azure_service_bus">8.2. Message Handling with MassTransit and Azure Service Bus</a>
<ul class="sectlevel3">
<li><a href="#_description_2">8.2.1. Description</a></li>
<li><a href="#_code_example_consumer_registration">8.2.2. Code Example: Consumer Registration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#section-design-decisions">9. Architecture Decisions</a>
<ul class="sectlevel2">
<li><a href="#_adr_0001_handling_influencer_followers_timeline">9.1. ADR 0001: Handling influencer followers timeline</a>
<ul class="sectlevel3">
<li><a href="#_status">9.1.1. Status</a></li>
<li><a href="#_context">9.1.2. Context</a></li>
<li><a href="#_decision">9.1.3. Decision</a></li>
<li><a href="#_consequences">9.1.4. Consequences</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#section-quality-scenarios">10. Quality Requirements</a>
<ul class="sectlevel2">
<li><a href="#_quality_scenarios">10.1. Quality Scenarios</a></li>
</ul>
</li>
<li><a href="#section-technical-risks">11. Risks</a></li>
<li><a href="#_technical_debts">12. Technical Debts</a></li>
<li><a href="#section-glossary">13. Glossary</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.arc42help {font-size:small; width: 14px; height: 16px; overflow: hidden; position: absolute; right: 0; padding: 2px 0 3px 2px;}
.arc42help::before {content: "?";}
.arc42help:hover {width:auto; height: auto; z-index: 100; padding: 10px;}
.arc42help:hover::before {content: "";}
@media print {
	.arc42help {display:none;}
}
</style>
<div class="paragraph lead">
<p>Software Architecture Documentation with arc42, C4 model and Documentation as Code</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-introduction-and-goals"><a class="anchor" href="#section-introduction-and-goals"></a>1. Introduction and Goals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The purpose of this document is to describe the architecture of a highly scalable image-sharing platform that allows users to upload, store, and share images with others across the globe. The platform needs to handle millions of concurrent users while ensuring high availability, performance, and security.</p>
</div>
<div class="paragraph">
<p>This document provides a high-level overview of the platform’s architecture, its main components, and the underlying technologies used to meet business and technical requirements. Additionally, it outlines key design decisions that influence the system’s scalability, reliability, and maintainability.</p>
</div>
<div class="paragraph">
<p>This document is intended for developers, architects, DevOps engineers, and other stakeholders involved in the design, implementation, and maintenance of the platform.</p>
</div>
<div class="sect2">
<h3 id="_goals"><a class="anchor" href="#_goals"></a>1.1. Goals</h3>
<div class="ulist">
<ul>
<li>
<p>The platform should provide a responsive and intuitive user interface that works seamlessly across different devices (web, mobile, etc.).</p>
</li>
<li>
<p>The architecture should be designed with cloud-native principles to optimize operational costs, using autoscaling and serverless services where appropriate.</p>
</li>
<li>
<p>The platform should be built with future feature expansion in mind, allowing for easy addition of new services (e.g., image editing, tagging, or machine learning features like image recognition).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_requirements_overview"><a class="anchor" href="#_requirements_overview"></a>1.2. Requirements Overview</h3>
<div class="ulist">
<div class="title">RQ1: When a user registers, they provide:</div>
<ul>
<li>
<p>Mandatory: First name, Last name, Email address, Password, Profile Image</p>
</li>
<li>
<p>Optional: age, location, interests etc &#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">RQ2: Users can share only images</div>
<ul>
<li>
<p>Formats: png, jpeg</p>
</li>
<li>
<p>Sizes: 320x240, 1024x768</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">RQ3: Unidirectional relationship</div>
<ul>
<li>
<p>User A follows User B
*User B may/may not follow User A</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">RQ4 A User can:</div>
<ul>
<li>
<p>Post a new image</p>
</li>
<li>
<p>Search for other users by first name/last name/username</p>
</li>
<li>
<p>view other user&#8217;s public info and shared images</p>
</li>
<li>
<p>Follow/unfollow other users</p>
</li>
<li>
<p>See a personalized timeline/newsfeed of the latest images, posted by people they follow</p>
<div class="ulist">
<ul>
<li>
<p>The images need to be in the chronological order</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Out of Scope</div>
<ul>
<li>
<p>Adding new formats like txt or videos should be easy to add in the future.</p>
</li>
<li>
<p>A User can:</p>
<div class="ulist">
<ul>
<li>
<p>Add reactions, comments, sharing etc..</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_quality_goals"><a class="anchor" href="#_quality_goals"></a>1.3. Quality Goals</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Quality Category</th>
<th class="tableblock halign-left valign-top">Quality</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Scenario</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Users visits</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<div class="title">Billions of active users (~1-2 Billion)</div>
<ul>
<li>
<p>Hundreds of millions of visits/day (100-500 Million)</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dynamic Scaling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system should scale out when user activity increases without performance degradation and scale down when no activity.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Geographic Distribution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application should be accessible with minimal latency in the europe regions through data centers or edge servers.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGR1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reliability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimizes downtime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must be designed to ensure minimal downtime, providing a 99.9% availability SLA.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGP1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low Latency</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<div class="title">Response time</div>
<ul>
<li>
<p>get images, search user &lt;500ms at 99pt</p>
</li>
<li>
<p>download image of size 2mb ~2000 ms</p>
</li>
<li>
<p>Timeline/Newsfeed load time &lt; 1000ms at 99pt</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Out of scope</div>
<ul>
<li>
<p>Uploads and downloads of images must be fast and efficient, with minimal latency, even under heavy loads.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGM1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modular Design</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>The system should be easy to modify and extend.</p>
</li>
<li>
<p>Allowing multiple independent teams to work on different modules simultaneously without conflicts.</p>
</li>
<li>
<p>Supports isolated updates and bug fixes. Changes, such as bug fixes, feature enhancements, or performance improvements, should be implemented quickly with minimal impact on other components.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGM3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teams Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables multiple teams to work on the system simultaneously without dependencies that cause delays. The architecture should support decoupled microservices, allowing teams to deploy and update their services independently.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGCE1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cost Efficiency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage Optimization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reduces storage space usage to minimize costs.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_stakeholders"><a class="anchor" href="#_stakeholders"></a>1.4. Stakeholders</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role/Name</th>
<th class="tableblock halign-left valign-top">Contact</th>
<th class="tableblock halign-left valign-top">Expectations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Legal and Compliance Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:LegalAndComplianceReam@gmail.com">LegalAndComplianceReam@gmail.com</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensure that the platform complies with global data protection regulations such as GDPR, CCPA, and HIPAA.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marketing Team Director</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:marketing@gmail.com">marketing@gmail.com</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensure the platform’s content is optimized for search engine discoverability (SEO), allowing users to find images through organic search traffic.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-architecture-constraints"><a class="anchor" href="#section-architecture-constraints"></a>2. Architecture Constraints</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Quality Category</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Con1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The platform must comply with data protection laws (e.g., GDPR, CCPA) and intellectual property regulations. This includes implementing necessary data privacy measures, consent mechanisms, and content moderation practices to avoid legal liabilities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Con2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The solution must adhere to budgetary constraints for development, deployment, and ongoing operational costs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Con3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.NET technologies</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Con4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.NET Use Google Authentication,</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Con5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use Azure Cloud</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-system-scope-and-context"><a class="anchor" href="#section-system-scope-and-context"></a>3. System Scope and Context</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_business_context"><a class="anchor" href="#_business_context"></a>3.1. Business Context</h3>
<div class="imageblock">
<div class="content">
<img src="./images/diag-3ac589fe8dd24d0541ec3b2468ade0ae.png" alt="Diagram" width="909" height="684">
</div>
</div>
<div class="paragraph">
<p><strong>Legende</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-3f51053e54e65e010ba45d9e2725d3d2.png" alt="Diagram" width="424" height="253">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Actor/System</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Users can upload images to the platform. can view and browse images uploaded by themselves and other users. can manage their profiles, including security settings like password management, and other preferences. might follow other users to receive updates or view their image feed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Follower</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Followers are notified about new images, posts, or activities (e.g., stories, comments) from the users they follow. Followers can browse through and view images and other media from their followed users in their feed. Followers can follow or unfollow users based on their preferences.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitor and correct false positives or errors from automated systems (e.g., AI-based content filtering). Review images, comments, and other user-generated content for violations of the platform&#8217;s guidelines (e.g., inappropriate, offensive, or illegal material). Respond to user reports of harmful content by investigating flagged images or accounts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image sharing system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the Explore page to discover new posts, accounts, and trends based on interests and previous interactions. Enable users to upload images and store them in a scalable and durable storage solution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Azure storage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Acts as the primary storage for uploaded images, allowing users to save and retrieve them quickly. Work with Azure CDN to cache images globally for faster access and reduced latency.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Google auth system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allow users to log in to the application using their Google account credentials. Provide secure tokens (JWT or OAuth tokens) for authenticated sessions, managing the lifecycle of these tokens (e.g., refresh, revoke).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_technical_context"><a class="anchor" href="#_technical_context"></a>3.2. Technical Context</h3>
<div class="imageblock">
<div class="content">
<img src="./images/diag-732d9d311768b1a4ca8b0042199be5ac.png" alt="Diagram" width="606" height="597">
</div>
</div>
<div class="paragraph">
<p><strong>Legende</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-de90bfd19d0bdec3314757ecc6cd8a40.png" alt="Diagram" width="436" height="253">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Actor/System</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Images:<br>
Formats: JPEG, PNG<br>
Max Size: 2 MB per image<br>
Max Count: 5<br>
Max Resolution: 1080x1080<br></p>
<p class="tableblock">User information: phone number, age, avatar &#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image sharing system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A highly scalable microservices architecture that utilizes eventual consistency to ensure availability and fault tolerance. It is exposed to external services via an API gateway, with access restricted exclusively to the Europe region.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Azure storage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stores images as blob files, stores multiple resoultions, stores with minimal redundency configurations.<br>
Image Resolutions:<br>
Thumbnails (Grid View or Previews)<br>
Resolution: 161 x 161 pixels (1:1 aspect ratio)<br>
Max Size: Under 100 KB<br>
Cover Images (IGTV, Collections, etc.)<br>
Resolution: 420 x 654 pixels (4:5 aspect ratio)<br>
Max Size: Around 100-300 KB<br>
Other types will be provided by designers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Google auth system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integrates using OAuth 2.0 with the implicit flow.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-solution-strategy"><a class="anchor" href="#section-solution-strategy"></a>4. Solution Strategy</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quality Goal</th>
<th class="tableblock halign-left valign-top">Quality goal category</th>
<th class="tableblock halign-left valign-top">Solution approach</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGM1, QGM2, QGM3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability, Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system will adopt a microservices architecture to meet the requirement of handling 1 billion users, as defined by the quality goals. This architecture allows each microservice to scale independently, ensuring efficient load management. The structure of microservices also supports parallel development by multiple teams, enabling faster and more flexible system evolution.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/azure/architecture/microservices">Microservices architecture design</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGM1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Microservice will follow Clean Architecture principles to maintain a clear separation of concerns between business logic and external systems (e.g., databases, user interfaces). This approach promotes high maintainability, testability, and flexibility. By isolating core business rules from technical details, the system will remain adaptable to future changes, allowing easy updates and enhancements.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/dotnet/architecture/modern-web-apps-azure/common-web-application-architectures#clean-architecture">Clean architecture</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS1, QGS2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability, Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST APIs for microservice interface design. REST is based on some constraints and principles that promote simplicity, scalability, and statelessness in the design. The client-server design pattern enforces the separation of concerns, which helps the client and the server components evolve independently.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://restfulapi.net/">What is REST</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGC1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compatibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API Versioning and Backward Compatibility	API versioning was implemented to ensure that newer versions of services can be introduced without breaking existing clients. This supports smooth transitions and ensures system stability during upgrades.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/dotnet/aspnet-api-versioning">api versioning</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS3, QGR2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reliability, Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An event-driven architecture was chosen to decouple services, improve system responsiveness, and allow services to scale independently. Asynchronous communication via messaging queues supports high availability and scalability.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/azure/architecture/guide/architecture-styles/event-driven">What is REST</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS3, QGR2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fault Tolerance, Reliability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Materialized Views for Data Replication	Materialized views were chosen to create copies of data in different microservice databases. This approach increases fault tolerance by ensuring that each microservice has its own local copy of the data, reducing dependency on other services and improving reliability.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/azure/architecture/patterns/materialized-view">Materialized view</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS1, QGS3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NoSQL databases with data partitioning, sharding, and replication were selected to handle large volumes of data and high load efficiently. Sharding ensures that data is distributed across multiple servers, allowing horizontal scaling as the dataset grows. Replication ensures that copies of data are stored across multiple nodes, improving fault tolerance and system reliability. Replication guarantees data availability even if a node fails, while sharding helps with load balancing by isolating data into smaller, manageable chunks.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/azure/architecture/patterns/materialized-view">Materialized view</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGR1, QGR2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reliability, Availability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">We chose to implement system Health Monitoring and Alerts and automated alerting to ensure real-time tracking of system performance, failures, and anomalies. This enables proactive issue resolution, minimizes downtime, and improves overall reliability. Tools like Azure Monitor or Application Insights will be used to set up alerts and notifications based on defined thresholds.	Reliability, Availability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/monitor-azure-resource">Monitor azure resource</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGR3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fault Tolerance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An active-active availability strategy was chosen to ensure that multiple instances of the system are running concurrently across 2 regions. This reduces downtime and improves fault tolerance, as traffic can be rerouted instantly to other active nodes in the event of a failure. It also helps with load balancing and improves response times by directing users to the nearest active instance.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/azure/well-architected/reliability/highly-available-multi-region-design">active-active availability strategy</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGCE1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cost Efficiency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To reduce storage space usage, images are resized before storage, retaining only necessary dimensions and compressing files to improve performance. This strategy minimizes storage costs and optimizes retrieval speeds, especially for high-resolution or large images that may not be necessary in full resolution for all use cases.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGCE1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cost Efficiency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Images are stored in a single copy, as they are not considered mission-critical. This strategy reduces storage costs and complexity while ensuring that the system can still operate effectively if images are lost or corrupted. Since the loss of images will not affect core system functionality, this approach reduces redundancy overhead, making it more cost-efficient.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-redundancy">storage-redundancy</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance, Availability, Scalability, Cost Efficiency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Azure Front Door CDN caching was chosen to offload the delivery of images content to edge servers located closer to users.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TODO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGSEC1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Azure Front Door as an API Gateway was chosen to act as a single entry point for all incoming requests, hiding the internal complexities of the system. The API Gateway abstracts the details of microservices and routes requests to the appropriate backend services. It also provides centralized management for security, authentication, rate limiting, logging, and monitoring. This reduces the need for client applications to directly communicate with multiple services and simplifies the architecture by providing a uniform interface for users.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/azure/architecture/microservices/design/gateway">gateway</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGC1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">External configuration storage was chosen to centralize the management of system configuration settings on the environments. Configuration settings can be easily updated without needing to redeploy services. This allows dynamic configuration changes without downtime, enables more secure management of sensitive information (e.g., API keys, database connections), and simplifies maintenance and updates.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/azure/azure-app-configuration/overview">azure-app-configuration</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGC1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability, Compatibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature toggles (also known as feature flags) were chosen to enable or disable features dynamically without deploying new code. This allows for gradual rollouts, A/B testing, and safe experimentation in production environments. By decoupling feature releases from deployment cycles, it also minimizes the risk of introducing new features or changes that could negatively impact the user experience. This strategy enables greater flexibility in managing features and reduces the complexity of large-scale system changes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/azure/azure-app-configuration/concept-feature-management">Concept feature management</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGM3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CI/CD pipelines were selected to automate deployment and testing, allowing faster and more reliable releases. This strategy reduces manual errors and ensures continuous integration of new features, improving overall system agility.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/azure/azure-app-configuration/concept-feature-management">Concept feature management</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGM2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comprehensive testing strategy was selected to ensure system robustness, quality, and stability across all stages of development. This includes unit tests, integration tests, load tests, and acceptance tests. By automating testing as part of the CI/CD pipeline, we ensure that code is consistently validated before deployment. Load and performance testing help simulate real-world scenarios, while automated acceptance tests ensure that new features meet business requirements. This proactive approach improves the reliability and maintainability of the system.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://learn.microsoft.com/en-us/training/modules/visual-studio-test-concepts/4-different-types-of-testing">4-different-types-of-testing</a><br>
   <a href="https://learn.microsoft.com/en-us/aspnet/core/test/integration-tests?view=aspnetcore-8.0">integration-tests</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load balancing was implemented to evenly distribute traffic across multiple instances of the service, ensuring that no single instance becomes a bottleneck. This improves system performance, minimizes downtime, and ensures high availability by dynamically routing traffic to healthy instances. It also allows the system to scale horizontally by adding new instances as needed. Load balancing is crucial for handling increased load and providing a seamless user experience under varying traffic conditions.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TODO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS1, QGR1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability, Fault Tolerance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service discovery was chosen to enable dynamic detection and registration of services within the system. This allows services to communicate with each other without hard-coded addresses or manual configuration. It ensures that services can automatically locate and interact with the correct endpoints, even as instances are added or removed. Service discovery is critical in a microservice architecture where services may scale up or down, and it simplifies the management of complex, dynamic environments.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TODO</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-building-block-view"><a class="anchor" href="#section-building-block-view"></a>5. Building Block View</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Maintain an overview of your source code by making its structure understandable through abstraction.</p>
</div>
<div class="sect2">
<h3 id="_high_level_design"><a class="anchor" href="#_high_level_design"></a>5.1. High level design</h3>
<div class="imageblock">
<div class="content">
<img src="./images/diag-5218988b6261a487a471a81f6ce8bdb4.png" alt="Diagram" width="1648" height="1030">
</div>
</div>
<div class="paragraph">
<p><strong>Legende</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-1520d0eab0497fe135e65ab204cd8716.png" alt="Diagram" width="606" height="243">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_microservices"><a class="anchor" href="#_microservices"></a>5.2. Microservices</h3>
<div class="sect3">
<h4 id="_timelines_api"><a class="anchor" href="#_timelines_api"></a>5.2.1. Timelines API</h4>
<div class="paragraph">
<p>The Timelines API microservice is responsible for managing user timelines in the image-sharing system.
It retrieves posts from users that the specified user follows, ensuring that they are ordered by recency.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-42e84100b5c3d088cbbcbe69b37c822e.png" alt="Diagram" width="258" height="419">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-ac9d4dc4c2545a709f995d1a4342ccbd.png" alt="Diagram" width="459" height="88">
</div>
</div>
<div class="sect4">
<h5 id="_interfaces"><a class="anchor" href="#_interfaces"></a>Interface(s)</h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://editor.swagger.io/?url=https://raw.githubusercontent.com/shcherby/system-design-arc42/refs/heads/main/documentation/arc42/building_blocks/timelines_api/timelines_api_swagger.yaml">REST API</a></p>
</li>
<li>
<p><a href="https://github.com">Messages</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_locations"><a class="anchor" href="#_locations"></a>Locations</h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com">Repository</a></p>
</li>
<li>
<p><a href="https://github.com">CI/CD</a></p>
</li>
<li>
<p><a href="https://github.com">Database</a></p>
</li>
<li>
<p><a href="https://github.com">Releases</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_fulfilled_requirements"><a class="anchor" href="#_fulfilled_requirements"></a>Fulfilled Requirements</h5>
<div class="ulist">
<ul>
<li>
<p>Users can read their timeline with recent updates from users they follow.</p>
</li>
<li>
<p>Users can set number of posts in their timeline, max 50 posts.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_quality_requirements"><a class="anchor" href="#_quality_requirements"></a>Quality Requirements</h5>
<div class="ulist">
<ul>
<li>
<p>Aim for responses within 200 milliseconds.</p>
</li>
<li>
<p>Support 1000 requests per second (RPS) during peak times.</p>
</li>
<li>
<p>The Timelines API must remain operational even if other part of the system is temporarily unavailable.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_risks"><a class="anchor" href="#_risks"></a>Risks</h5>
<div class="ulist">
<ul>
<li>
<p>Risk of slow response times or degraded performance during peak usage periods.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_components"><a class="anchor" href="#_components"></a>Components</h5>
<div class="imageblock">
<div class="content">
<img src="./images/diag-eb53625fe0144d227a5b30d9ab2b426c.png" alt="Diagram" width="843" height="1260">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-21b1416e36d92c7ce2407891d49c5603.png" alt="Diagram" width="469" height="193">
</div>
</div>
<div class="paragraph">
<p><strong>Updating Timeline postCreated event consumer</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Is responsible for processing updates to user timelines in response to new created post.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Followers timeline updater</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reads user followers list and insert recent post to the followers timeline, ensuring posts is ordered by recency.</p>
</li>
<li>
<p>Removes outdated posts from the followers timeline.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Users client</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Responsible for interacting with the Users API microservice to retrieve user data</p>
</li>
<li>
<p>Fetching a list of followers for a given user.</p>
</li>
<li>
<p>Retrieving the user type regular user, influencer.</p>
</li>
<li>
<p>UsersClient implemented as an abstraction and has Mock version that uses for microservice integration testing</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Timelines repository</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Responsible for managing and accessing timeline data.</p>
</li>
<li>
<p>Saving and retrieving followers timeline by user Id.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Influencers posts repository</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Responsible for storing and managing influencer posts within the timeline service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Timeline endpoint</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Handles Get timeline HTTP requests</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Timeline query</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Querying and returning calculated user’s timeline by user Id</p>
</li>
<li>
<p>if the user follows any influencers, Querying and returning a user’s timeline by aggregating user timeline with an influencers posts.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Timelines database</strong></p>
</div>
<div class="paragraph">
<p>The Key/Value NoSQL Timelines Database is responsible for efficiently storing and retrieving timeline data in the image-sharing system.</p>
</div>
<div class="paragraph">
<p><em class="small"><strong>Timelines table</strong></em></p>
</div>
<div class="paragraph">
<p>Storing each user’s timeline as a unique key, with associated values representing the posts in chronological order, allowing for quick retrieval of timelines.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Specification</strong></th>
<th class="tableblock halign-left valign-top"><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Table Name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timelines</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Id.<br>
                        Data format: GUID as string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Value</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of posts, each represented as an object.<br>
                        Data format: JSON.<br>
                        Max size: 20 MB</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><em class="small"><strong>Influences posts table</strong></em></p>
</div>
<div class="paragraph">
<p>Is responsible for managing and storing copy of posts created by influencers.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Specification</strong></th>
<th class="tableblock halign-left valign-top"><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Table Name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">InfluencersPosts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Influencer Id.<br>
                        Data format: GUID as string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Value</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of posts, each represented as an object.<br>
                        Data format: JSON.<br>
                        Max size: 20 MB</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_runtime_views"><a class="anchor" href="#_runtime_views"></a>Runtime views</h5>
<div class="sect5">
<h6 id="handling-influencer-followers"><a class="anchor" href="#handling-influencer-followers"></a>Handling influencer followers timeline</h6>
<div class="imageblock">
<div class="content">
<img src="./images/diag-d5ade753184020f1070db440b9c5a8c7.png" alt="Diagram" width="1722" height="530">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-5240cc48c3c7293e5d458da0afe36996.png" alt="Diagram" width="469" height="188">
</div>
</div>
<div class="paragraph">
<p>Posts api microservice dispatches post created event.
Post created event consumes by post created event consumer component.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-066249cec3ba76be44346525b32cb714.png" alt="Diagram" width="823" height="1052">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-21b1416e36d92c7ce2407891d49c5603.png" alt="Diagram" width="469" height="193">
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_users_api"><a class="anchor" href="#_users_api"></a>5.2.2. Users API</h4>
<div class="paragraph">
<p>The Users API microservice is responsible for managing all user-related functionality within the system.
Its primary purpose is to handle operations such as user registration, authentication, profile management, and account settings.
It also manages user data, including personal information, preferences, and security features like password updates and account recovery.</p>
</div>
<div class="sect4">
<h5 id="_interfaces_2"><a class="anchor" href="#_interfaces_2"></a>Interface(s)</h5>
<div class="paragraph">
<p><a href="https://editor.swagger.io/?url=https://raw.githubusercontent.com/shcherby/system-design-arc42/refs/heads/main/documentation/arc42/building_blocks/users_api/users_api_swagger.yaml">REST API</a>
<a href="https://github.com">Messages</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_locations_2"><a class="anchor" href="#_locations_2"></a>Locations</h5>
<div class="paragraph">
<p><a href="https://github.com">users-api details</a>
<a href="https://github.com">users-api repository</a>
<a href="https://github.com">users-api CI/CD</a>
<a href="https://github.com">users-api database</a>
<a href="https://github.com">users-api releases</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_qualityperformance_characteristics"><a class="anchor" href="#_qualityperformance_characteristics"></a>Quality/Performance Characteristics</h5>
<div class="sect5">
<h6 id="_performance"><a class="anchor" href="#_performance"></a>Performance</h6>
<div class="ulist">
<ul>
<li>
<p>Aim for responses within 200 milliseconds.</p>
</li>
<li>
<p>Support several thousand requests per second (RPS) during peak times.</p>
</li>
<li>
<p>Minimize network latency with efficient API calls and lightweight data formats.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_scalability"><a class="anchor" href="#_scalability"></a>Scalability</h6>
<div class="ulist">
<ul>
<li>
<p>Design to add more instances as user demand increases.</p>
</li>
<li>
<p>Distribute requests evenly across multiple API instances.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_reliability"><a class="anchor" href="#_reliability"></a>Reliability</h6>
<div class="ulist">
<ul>
<li>
<p>Target 99.9% uptime with redundancy and failover strategies.</p>
</li>
<li>
<p>Ensure limited functionality in case of partial failures.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_fulfilled_requirements_2"><a class="anchor" href="#_fulfilled_requirements_2"></a>Fulfilled Requirements</h5>
<div class="ulist">
<ul>
<li>
<p>Users can create accounts by providing necessary details (username, email, password).</p>
</li>
<li>
<p>Users can log in using their credentials, receiving an access token for subsequent requests.</p>
</li>
<li>
<p>Users can view and update their profile information (e.g., username, bio).</p>
</li>
<li>
<p>All sensitive user data is encrypted in transit and at rest.</p>
</li>
<li>
<p>The API implements rate limiting to prevent abuse and ensure fair usage.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_risks_2"><a class="anchor" href="#_risks_2"></a>Risks</h5>
<div class="ulist">
<ul>
<li>
<p>Ensuring compliance with data protection regulations (e.g., GDPR) regarding user data handling and storage.</p>
</li>
<li>
<p>Risks of unauthorized access or data breaches if security measures are not adequately implemented.</p>
</li>
<li>
<p>Reliance on third-party authentication providers could lead to outages or service interruptions.</p>
</li>
<li>
<p>Complexity in the registration or authentication process may lead to user drop-off.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-runtime-view"><a class="anchor" href="#section-runtime-view"></a>6. Runtime View</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sign_in"><a class="anchor" href="#_sign_in"></a>6.1. Sign-In</h3>
<div class="imageblock">
<div class="content">
<img src="./images/diag-e0a2a1fcdc3c2aba3869b356ff20345a.png" alt="Diagram" width="1306" height="395">
</div>
</div>
<div class="paragraph">
<p><strong>Legende</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-1520d0eab0497fe135e65ab204cd8716.png" alt="Diagram" width="606" height="243">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-deployment-view"><a class="anchor" href="#section-deployment-view"></a>7. Deployment View</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_development_environment"><a class="anchor" href="#_development_environment"></a>7.1. Development environment</h3>
<div class="imageblock">
<div class="content">
<img src="./images/diag-38c6c068877ea8eff69c36302d56fa27.png" alt="Diagram" width="2987" height="1621">
</div>
</div>
<div class="paragraph">
<p><strong>Legende</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-49cc9c937a8d0352e7adb2ca595c61e4.png" alt="Diagram" width="595" height="232">
</div>
</div>
<div class="sect3">
<h4 id="_motivation"><a class="anchor" href="#_motivation"></a>7.1.1. Motivation</h4>
<div class="paragraph">
<p>The development environment serves as a critical space for developers and QA engineers to validate features before deployment to production. This environment allows for comprehensive testing and debugging, enabling the team to identify and address issues early in the development cycle. By simulating a production-like setup, the development environment ensures that new features, updates, and configurations are thoroughly vetted, reducing the risk of errors and unexpected behavior in the live system.</p>
</div>
<div class="paragraph">
<p>Additionally, this environment promotes collaborative testing and iterative improvement, fostering a controlled, stable setting for finalizing code quality and functionality prior to production release.</p>
</div>
</div>
<div class="sect3">
<h4 id="_quality_andor_performance_features"><a class="anchor" href="#_quality_andor_performance_features"></a>7.1.2. Quality and/or Performance Features</h4>
<div class="ulist">
<ul>
<li>
<p>The environment does not utilize Azure Front Door since it does not handle user traffic.</p>
</li>
<li>
<p>Azure Kubernetes Service (AKS) is configured with only 2 nodes, as traffic demands are minimal in this environment.</p>
</li>
<li>
<p>It supports deploying all microservices under separate namespaces, enabling the creation of isolated feature environments for testing individual features or changes.</p>
</li>
<li>
<p>Resources are optimized to reduce costs, given that the environment’s primary purpose is internal testing rather than production-scale performance.</p>
</li>
<li>
<p>Monitoring and logging are set up to capture development-level performance and error data, aiding in debugging without the need for high-traffic resilience.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_production_environment"><a class="anchor" href="#_production_environment"></a>7.2. Production environment</h3>
<div class="imageblock">
<div class="content">
<img src="./images/diag-40535d581c42ae2b030951e9d1a5c7b1.png" alt="Diagram" width="3672" height="1621">
</div>
</div>
<div class="paragraph">
<p><strong>Legende</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-219acbdc92d8a3aa1b27629448a89064.png" alt="Diagram" width="595" height="232">
</div>
</div>
<div class="sect3">
<h4 id="_motivation_2"><a class="anchor" href="#_motivation_2"></a>7.2.1. Motivation</h4>
<div class="paragraph">
<p>The production environment is designed to provide a stable, secure, and high-performing infrastructure for serving live users. It is configured to handle real-world traffic, ensuring high availability and scalability to meet varying demands. By mirroring the final deployment setup, the production environment allows the system to operate at its best, delivering a seamless user experience.
Robust security measures, such as firewalls, encryption, and access controls, are implemented to protect sensitive data and maintain compliance with industry standards. Additionally, advanced monitoring and alerting systems are set up to detect and respond to issues in real time, minimizing downtime and ensuring business continuity.
This environment represents the ultimate stage in the deployment pipeline, where thoroughly tested features and updates are made available to end users, requiring the highest standards of reliability, performance, and resilience.</p>
</div>
</div>
<div class="sect3">
<h4 id="_quality_andor_performance_features_2"><a class="anchor" href="#_quality_andor_performance_features_2"></a>7.2.2. Quality and/or Performance Features</h4>
<div class="ulist">
<ul>
<li>
<p>The production environment is configured for maximum uptime, utilizing redundancy and failover mechanisms to ensure service continuity, even in case of partial system failures.</p>
</li>
<li>
<p>Auto-scaling features are enabled to handle fluctuations in user demand, allowing the system to maintain performance during peak loads without manual intervention.</p>
</li>
<li>
<p>Strict security protocols, such as encryption, access control, and network isolation, are in place to protect sensitive data and meet industry compliance standards.</p>
</li>
<li>
<p>Optimized for low-latency responses through global load balancing (e.g., Azure Front Door) and geographic replication, reducing response times for users across different regions.</p>
</li>
<li>
<p>Real-time monitoring and alerting are established to track performance metrics, identify potential issues, and trigger alerts to the operations team for rapid incident response.</p>
</li>
<li>
<p>Implemented through distributed systems and backup mechanisms, ensuring the system can withstand hardware failures, network issues, and other disruptions without affecting user experience.</p>
</li>
<li>
<p>Ensures strong or eventual consistency depending on the service requirements, balancing availability with the consistency needs of different microservices in the system.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-concepts"><a class="anchor" href="#section-concepts"></a>8. Cross-cutting Concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_logging"><a class="anchor" href="#_logging"></a>8.1. Logging</h3>
<div class="paragraph">
<p>In the microservice architecture for our application, logging is implemented as a cross-cutting concern to provide consistent, centralized, and structured logging across all services. Using ASP.NET Core as the framework and Azure Application Insights (App Insights) as the logging and monitoring solution, our approach to logging supports traceability, debugging, and performance monitoring across the system.</p>
</div>
<div class="sect3">
<h4 id="_description"><a class="anchor" href="#_description"></a>8.1.1. Description</h4>
<div class="ulist">
<ul>
<li>
<p>Centralized Logging: Each microservice uses ASP.NET Core’s built-in logging capabilities, which are configured to send structured log data to Azure App Insights. This setup ensures that logs are collected centrally, making it easier to track interactions and dependencies across services.</p>
</li>
<li>
<p>Correlation IDs: Each request across microservices is tagged with a unique Correlation ID. This ID is propagated throughout all API calls, message queues, and external service integrations, allowing developers and operators to trace the lifecycle of requests across multiple services and identify bottlenecks or errors in the request flow.</p>
</li>
<li>
<p>Log Levels: Different log levels (e.g., Information, Warning, Error, Critical) are used to classify log messages based on severity. Critical errors and warnings are set to trigger alerts in App Insights, providing immediate notification to the support team if any issues arise.</p>
</li>
<li>
<p>Performance Metrics and Insights: In addition to application logs, App Insights collects performance metrics such as request durations, failure rates, and dependencies. These metrics help monitor the health of the microservices and identify potential performance issues or resource bottlenecks.</p>
</li>
<li>
<p>Security and Privacy Compliance: Logging is configured to avoid sensitive data exposure. Personally identifiable information (PII) is redacted or excluded from logs, ensuring compliance with privacy regulations and standards.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_message_handling_with_masstransit_and_azure_service_bus"><a class="anchor" href="#_message_handling_with_masstransit_and_azure_service_bus"></a>8.2. Message Handling with MassTransit and Azure Service Bus</h3>
<div class="paragraph">
<p>In our microservices architecture, message handling is treated as a cross-cutting concern to facilitate reliable and decoupled communication between services. By implementing the MassTransit library with Azure Service Bus, we enable multiple consumers to process the same message type independently, enhancing modularity and reducing service coupling.</p>
</div>
<div class="sect3">
<h4 id="_description_2"><a class="anchor" href="#_description_2"></a>8.2.1. Description</h4>
<div class="ulist">
<ul>
<li>
<p>Multiple Consumers for the Same Event: MassTransit allows for multiple consumers to subscribe to a single event type. For example, when a <code>PostCreatedEvent</code> is published, both the <code>AuditConsumer</code> and <code>NotificationConsumer</code> can independently handle the message, ensuring that different parts of the system can respond to the same event in their own ways.</p>
</li>
<li>
<p>Decoupled Communication: This approach fosters loose coupling between services. Each consumer operates independently and can be modified or replaced without impacting other consumers or the message publisher.</p>
</li>
<li>
<p>Scalability and Reliability: Utilizing Azure Service Bus provides a robust messaging infrastructure that handles message queuing, delivery guarantees, and scaling, which ensures that the system remains responsive even under high load.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_code_example_consumer_registration"><a class="anchor" href="#_code_example_consumer_registration"></a>8.2.2. Code Example: Consumer Registration</h4>
<div class="paragraph">
<p>In the following code snippet, we register two consumers—<code>AuditConsumer</code> and <code>NotificationConsumer</code>—to listen for <code>PostCreatedEvent</code> messages using MassTransit with Azure Service Bus.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">public void ConfigureServices(IServiceCollection services)
{
    services.AddMassTransit(x =&gt;
    {
        // Register each consumer for handling PostCreatedEvent
        x.AddConsumer&lt;AuditConsumer&gt;();
        x.AddConsumer&lt;NotificationConsumer&gt;();

        // Configure the MassTransit bus to use Azure Service Bus
        x.UsingAzureServiceBus((context, cfg) =&gt;
        {
            cfg.Host("your-azure-service-bus-connection-string");

            // Configure the topic and subscription for the PostCreatedEvent
            cfg.Message&lt;PostCreatedEvent&gt;(configTopology =&gt;
            {
                configTopology.SetEntityName("post-created-topic");
            });

            // Configure subscription endpoints for each consumer
            cfg.SubscriptionEndpoint("audit-consumer-subscription", e =&gt;
            {
                e.ConfigureConsumer&lt;AuditConsumer&gt;(context);
            });

            cfg.SubscriptionEndpoint("notification-consumer-subscription", e =&gt;
            {
                e.ConfigureConsumer&lt;NotificationConsumer&gt;(context);
            });
        });
    });

    services.AddMassTransitHostedService();
}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-design-decisions"><a class="anchor" href="#section-design-decisions"></a>9. Architecture Decisions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_adr_0001_handling_influencer_followers_timeline"><a class="anchor" href="#_adr_0001_handling_influencer_followers_timeline"></a>9.1. ADR 0001: Handling influencer followers timeline</h3>
<div class="sect3">
<h4 id="_status"><a class="anchor" href="#_status"></a>9.1.1. Status</h4>
<div class="paragraph">
<p>Proposed: 2024-02-21</p>
</div>
<div class="paragraph">
<p>Accepted: 2024-10-10</p>
</div>
</div>
<div class="sect3">
<h4 id="_context"><a class="anchor" href="#_context"></a>9.1.2. Context</h4>
<div class="paragraph">
<p>Influencers may have millions of followers, and updating timelines immediately after each post could trigger updates for millions of users, risking overload of the timelines service.</p>
</div>
</div>
<div class="sect3">
<h4 id="_decision"><a class="anchor" href="#_decision"></a>9.1.3. Decision</h4>
<div class="paragraph">
<p>To mitigate this, a separate materialized view table for influencer posts was created.
Given the limited number of influencers, this table remains relatively small. When an influencer publishes a new post, it is added to the influencers posts table, with entries ordered in descending order,
similar to the main timelines table. During a user timeline query, the timeline query component retrieves the user&#8217;s list of followed influencers.
If influencers are followed, posts from the influencers posts table are aggregated with the user’s timeline posts, creating a unified, chronological feed.</p>
</div>
<div class="paragraph">
<p>Runtime view of the scenario you can find on the following section
<a href="#handling-influencer-followers">Handling influencer followers</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_consequences"><a class="anchor" href="#_consequences"></a>9.1.4. Consequences</h4>
<div class="paragraph">
<p>The Timelines API microservice now maintains a copy of influencer posts, requiring additional logic to ensure data remains synchronized. The user timeline query is a high-load operation, so caching the influencer list is necessary to minimize dependency on the Users API microservice. However, if the Users API service is down, the influencer list cache may become outdated, resulting in an out-of-date timeline for the user.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-quality-scenarios"><a class="anchor" href="#section-quality-scenarios"></a>10. Quality Requirements</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Quality Category</th>
<th class="tableblock halign-left valign-top">Quality</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Scenario</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Users activity</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<div class="title">Each user uploads ~1 image/day</div>
<ul>
<li>
<p>Each image size ~2MB</p>
</li>
<li>
<p>Data Processing Volume: ~1PB/day</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGR2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reliability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fault Tolerance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintains service continuity despite failures. In case of a failure, the system should redistribute load seamlessly, avoiding disruptions.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGP1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low Latency</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<div class="title">Response time</div>
<ul>
<li>
<p>get images, search user &lt;500ms at 99pt</p>
</li>
<li>
<p>download image of size 2mb ~2000 ms</p>
</li>
<li>
<p>Timeline/Newsfeed load time &lt; 1000ms at 99pt</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Out of scope</div>
<ul>
<li>
<p>Uploads and downloads of images must be fast and efficient, with minimal latency, even under heavy loads.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGP2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High Throughput</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system should support up to 10,000 concurrent requests per second, especially during peak hours.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGSEC1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access Control</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Limits access for functionality to authorized users only.</p>
</li>
<li>
<p>Only authenticated and authorized users can access specific features like posting content, following other users.</p>
</li>
<li>
<p>Un authorized users can view limited timeline.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGS2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data Encryption</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Protects sensitive data both in transit and at rest. User credentials and personal information should be encrypted to ensure privacy and comply with data regulations.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGP1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Portability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Interfaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Support only web interface</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGM2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automated Testing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validates system functionality with each deployment. Automated integration and regression tests should run for each deployment to reduce the risk of introducing errors or breaking functionality.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGM3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teams Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables multiple teams to work on the system simultaneously without dependencies that cause delays. The architecture should support decoupled microservices, allowing teams to deploy and update their services independently.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QGC1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compatibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backward Compatibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supports multiple API versions and maintains backward compatibility with existing clients. The system should allow existing clients to function without breaking when new API versions are introduced.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_quality_scenarios"><a class="anchor" href="#_quality_scenarios"></a>10.1. Quality Scenarios</h3>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-technical-risks"><a class="anchor" href="#section-technical-risks"></a>11. Risks</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 37.5%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Risk ID</th>
<th class="tableblock halign-left valign-top">Risk Description</th>
<th class="tableblock halign-left valign-top">Mitigation Strategy</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High load from influencers causing performance degradation due to large-scale timeline updates.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implement a separate materialized view for influencer posts to reduce load on the main timeline. Use caching and batch processing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency on external APIs, leading to potential service disruptions if APIs are down.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use local caching and circuit breakers to handle temporary outages and minimize the impact on users.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cost overruns due to high storage and compute needs as the system scales.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optimize storage through data compression, archiving, and implement auto-scaling to manage resources dynamically.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inconsistent data updates due to eventual consistency in microservices.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use idempotent operations and reconcile data periodically to ensure consistency across services.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Risk of unauthorized access and data breaches.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enforce strong access controls, data encryption, and multi-factor authentication for enhanced security.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outdated data in influencer timelines due to cache staleness.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set appropriate cache expiration times and implement cache invalidation strategies to keep data fresh.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_technical_debts"><a class="anchor" href="#_technical_debts"></a>12. Technical Debts</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 37.5%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Debt ID</th>
<th class="tableblock halign-left valign-top">Technical Debt Description</th>
<th class="tableblock halign-left valign-top">Impact and Remediation Strategy</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lack of centralized logging system for monitoring and troubleshooting.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Makes debugging across services difficult. Remediate by implementing a centralized logging solution such as Azure Application Insights or ELK Stack.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incomplete API versioning, leading to backward compatibility issues.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Causes disruptions for clients using older API versions. Remediate by adopting consistent API versioning and supporting multiple versions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insufficient automated tests for microservices.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leads to increased risk of errors during deployment. Remediate by developing automated test suites covering unit, integration, and end-to-end tests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hard-coded configurations across services.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reduces flexibility in deployment and configuration management. Remediate by using a centralized configuration management tool, like Azure App Configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inconsistent error handling and retry mechanisms in services.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leads to unpredictable behavior during failures. Remediate by standardizing error handling and retry policies across services.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limited resilience testing for failure scenarios (e.g., network partitions).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increases the risk of unexpected downtime. Remediate by conducting regular chaos engineering exercises to test service resilience.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No clear deprecation policy for obsolete services or APIs.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Results in bloated codebase and confusion among developers. Remediate by establishing a deprecation policy with clear timelines for phasing out outdated services or versions.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-glossary"><a class="anchor" href="#section-glossary"></a>13. Glossary</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API Gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A server that acts as an entry point for clients, managing requests to multiple backend services in a microservices architecture.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Active-Active Strategy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A high availability approach where multiple regions or instances are active simultaneously, ensuring seamless failover and load balancing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Microservices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An architectural style that structures an application as a collection of loosely coupled services, each responsible for a specific business capability.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API Versioning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The practice of managing different versions of an API to maintain compatibility and support for clients using older versions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eventual Consistency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A consistency model in distributed systems where updates are not immediately reflected across all nodes but will eventually converge to the same state.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">High Availability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A system design approach that ensures minimal downtime and continuous operation, often achieved through redundancy and failover mechanisms.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CI/CD Pipeline</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A set of automated processes for continuous integration and continuous deployment, enabling rapid and reliable software delivery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A temporary data storage layer that stores frequently accessed data to reduce retrieval times and improve performance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chaos Engineering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The practice of testing a system&#8217;s resilience by intentionally introducing failures to observe how it responds and identify areas for improvement.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Centralized Logging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A logging approach where logs from various services are collected and stored in a central location for monitoring and troubleshooting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CRUD Operations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basic data operations: Create, Read, Update, and Delete, commonly used in database management.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fault Tolerance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ability of a system to continue operating properly in the event of a failure of some of its components.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load Balancer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A component that distributes incoming network traffic across multiple servers to ensure availability and reliability.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A logical grouping used to organize resources, often used in Kubernetes to isolate applications or environments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The capability of a system to handle increased load by adding resources, such as compute power or storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Bus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A messaging infrastructure that allows applications to communicate with each other in a decoupled way, commonly used in distributed systems.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SLA (Service Level Agreement)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A commitment between a service provider and a client that defines the expected level of service performance, availability, and support.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 8.1 EN<br>
Last updated 2024-11-06 10:33:25 UTC
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>